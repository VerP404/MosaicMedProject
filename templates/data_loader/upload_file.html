<!-- templates/upload_file.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Загрузка CSV файла</title>
</head>
<body>
<h1>Загрузка CSV файла</h1>

{% if error %}
    <p style="color: red;">Ошибка: {{ error }}</p>
{% endif %}

<form method="POST" enctype="multipart/form-data">
    {% csrf_token %}
    {{ form.as_p }}
    <button type="submit">Проверить файл</button>
</form>

{% if columns %}
    <h2>Столбцы в файле:</h2>
    <ul>
        {% for column in columns %}
            <li>{{ column }}</li>
        {% endfor %}
    </ul>
{% endif %}

{% if missing_columns %}
    <h2>Отсутствующие обязательные столбцы:</h2>
    <ul>
        {% for column in missing_columns %}
            <li style="color: red;">{{ column }}</li>
        {% endfor %}
    </ul>
{% endif %}

{% if ready_for_upload %}
    <form method="POST" enctype="multipart/form-data">
        {% csrf_token %}
        <input type="hidden" name="confirmed" value="true">
        <button type="submit">Загрузить файл</button>
    </form>
{% endif %}
</body>
</html>
