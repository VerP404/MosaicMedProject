### На странице home должны быть сервисы:

* Рабочее место главного врача

Продумать что должно быть тут

* Рабочее место заведующего

Есть заведующие корпусами и отделений в корпусах.
Нужно сделать персональную настройку для заведующего с выбором чекбоксов - список корпусов и подразделений,
которые будут доступны для фильтрации.

* Рабочее место экономиста

Все отчеты по объемам.

* Рабочее место статистика

Статистические отчеты. Часть взять от экономистов.

* Рабочее место врача

Главная страница - дашборд с выполнением показателей и текущими задачами (разработать!).
Доступ к отчетам по врачам (с фильтром по себе).

* Рабочее место модератора

Блоки для загрузки данных. Получение отчетов по ИТ службе. Сборки счетов.

* Администрирование

Доступ в админсайт. Возможно дать часть прав Модератору

* Обучение

Инструкции по работе с системой. Документация. Приказы и прочее.
Сделать на основе wiki-системы. Если есть личный кабинет, то добавить тестирование после темы.

* Панель пациента

Интегрировать в проект информационную панель

* Панель главного врача

Открывается приложение дашборд для телевизора главного врача с основными показателями на 1 страницу

* Инфостенд

Инфомат для каждого корпуса. Для модератора (программиста в МО). Создание кнопок в интерфейсе.
Печать справок. Возможно дополнить функционал - нужно проработать.

* Мониторинг

Система создания и ведения отчетных форм. Нужно сделать аналог Parus. Посмотреть готовые opensource решения.

Рабочие места:

1. Главная страница - дашборд с основными данными нужными специалисту
2. Сайдбар - переход между разными страницами.

Придумать способ разграничения прав. разделять по модулям/отчетам/страницам и в админке разделять или иначе?

## Перенос данных между разными рабочими машинами

1. Создание бекапа базы данных

``` sql
pg_dump -U postgres -d mosaicmed -F p -b -v -f "mosaicmed_backup.sql"
```

2. Перенести файл на сервер
3. Удалить старую базу данных.
4. Выполнить скрипт

``` sql
psql -U postgres -d mosaicmed -f "C:\Users\RDN\Downloads\Telegram Desktop\mosaicmed_backup.sql"
```

5. Удалить из приложения файлы миграций при наличии
6. Создать миграции

``` python
python manage.py makemigrations    
```

7. Очистить таблицу `django_migrations`
8. Провести фейковую миграцию

``` python
python manage.py migrate --fake
```

9. Проверить что нет ошибок при выполнении нормальной миграции

``` python
python manage.py migrate
```

## Создание новых страниц отчетов

1. Создаем папку отчета в папке [pages](apps%2Fanalytical_app%2Fpages). Папка создается в нужном блоке.
2. Формат папки: 2 файла page (форматирование) и query (запрос)
3. в main добавляем в CardBody нужные ссылки на отчеты и колбек для маршрутизации
4. Вносим изменения в [routes.py](apps%2Fanalytical_app%2Froutes.py) маршрутизацию как в предыдущем пункте

## Создание postgres

Выполнить команду для установки PostgreSQL и дополнительных утилит:

``` cmd
sudo apt install postgresql-16 postgresql-contrib
```

Проверяем статус службы с помощью команды:

``` cmd
sudo systemctl status postgresql
```

Если не запущен postgresql, то выполняем:

``` cmd
sudo -u postgres psql
```

Отредактируем файл конфигурации postgresql.conf и измените значение listen_addresses. Проверить версию postgresql и
папку:

``` cmd
sudo nano /etc/postgresql/16/main/postgresql.conf
```

Находим с помощью `ctrl + w` строку:

``` cmd
#listen_addresses = 'localhost'
```

Зменяем на:

``` cmd
listen_addresses = '*'
```

Открываем файл `pg_hba.conf` в той же директории:

``` cmd
sudo nano /etc/postgresql/16/main/pg_hba.conf
```

Внизу файла находи блок `# IPv4 local connections:`
Добавляем в него запись:

``` cmd
host    all             all             0.0.0.0/0               scram-sha-256
```

После внесения изменений перезапускаем PostgreSQL

``` cmd
sudo systemctl restart postgresql
```

Меняем пароль:
Войдем в PostgreSQL

``` 
sudo -u postgres psql
```

Вводим новый пароль.

``` cmd
ALTER USER postgres PASSWORD 'Qaz123';
```

Чтобы закрыть:

``` cmd
\q
```

В системе управления базой данных создаем подключение и базу данных `mosaicmed`

Создаем и редактируем файл .env в корне приложения MosaicMedProject

```  cmd
touch .env
```

``` cmd
nano .env
```

Указываем локальные настройки.

Создаем архив с базой данных и передаем его на сервер

``` 
\MosaicMedProject>scp "mosaicmed_backup.rar" admindd@10.236.176.150:/home/admindd/code/MosaicMedProject
```

Указываем нужного пользователя, адрес и папку проекта

Устанавливаем архиватор

``` 
sudo apt install unrar
```

Разархивируем файл

``` 
unrar x mosaicmed_backup.rar
```